
```
#include<stdio.h>

//求n的阶乘
//要用迭代而不是递归,避免递归的额外开销和栈溢出风险
//普通的 int 类型在大多数系统上是 32 位，能表示的最大值约为 2,147,483,647。
//long long 类型通常是 64 位，能表示的最大值约为 9,223,372,036,854,775,807。提供更大范围，储更多的阶乘结果，避免溢出。
long long factorial(int n) {
    long long result = 1;

    if (n == 0 || n == 1) {
        result = 1;
    }
    else {
        for (int i = 2; i < n + 1; i++) {
            result = result * i;
            //printf("%d\n", result);
        }
    }
    return result;
}
int main(void) {
    int n;
    long long result = 0;
    scanf("%d", &n);

    for (int i = 1; i < n + 1; i++) {
        result = result + factorial(i);
    }
    printf("%lld", result);
    return 0;
}
```


错误版本,使用递归,int,会导致栈溢出
```
#include<stdio.h>

//求n的阶乘
int factorial(int n) {
    int result = 0;

    if (n == 0 || n == 1) {
        result = 1;
    }
    else {
        result = factorial(n - 1) * n;
    }
    return result;
}
int main(void) {
    int n, result = 0;
    scanf("%d", &n);

    for (int i = 1; i < n + 1; i++) {
        result = result + factorial(i);
    }
    printf("%d", result);
    return 0;
}
```
